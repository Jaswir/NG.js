function md5cycle(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=ff(n,r,i,s,t[0],7,-680876936);s=ff(s,n,r,i,t[1],12,-389564586);i=ff(i,s,n,r,t[2],17,606105819);r=ff(r,i,s,n,t[3],22,-1044525330);n=ff(n,r,i,s,t[4],7,-176418897);s=ff(s,n,r,i,t[5],12,1200080426);i=ff(i,s,n,r,t[6],17,-1473231341);r=ff(r,i,s,n,t[7],22,-45705983);n=ff(n,r,i,s,t[8],7,1770035416);s=ff(s,n,r,i,t[9],12,-1958414417);i=ff(i,s,n,r,t[10],17,-42063);r=ff(r,i,s,n,t[11],22,-1990404162);n=ff(n,r,i,s,t[12],7,1804603682);s=ff(s,n,r,i,t[13],12,-40341101);i=ff(i,s,n,r,t[14],17,-1502002290);r=ff(r,i,s,n,t[15],22,1236535329);n=gg(n,r,i,s,t[1],5,-165796510);s=gg(s,n,r,i,t[6],9,-1069501632);i=gg(i,s,n,r,t[11],14,643717713);r=gg(r,i,s,n,t[0],20,-373897302);n=gg(n,r,i,s,t[5],5,-701558691);s=gg(s,n,r,i,t[10],9,38016083);i=gg(i,s,n,r,t[15],14,-660478335);r=gg(r,i,s,n,t[4],20,-405537848);n=gg(n,r,i,s,t[9],5,568446438);s=gg(s,n,r,i,t[14],9,-1019803690);i=gg(i,s,n,r,t[3],14,-187363961);r=gg(r,i,s,n,t[8],20,1163531501);n=gg(n,r,i,s,t[13],5,-1444681467);s=gg(s,n,r,i,t[2],9,-51403784);i=gg(i,s,n,r,t[7],14,1735328473);r=gg(r,i,s,n,t[12],20,-1926607734);n=hh(n,r,i,s,t[5],4,-378558);s=hh(s,n,r,i,t[8],11,-2022574463);i=hh(i,s,n,r,t[11],16,1839030562);r=hh(r,i,s,n,t[14],23,-35309556);n=hh(n,r,i,s,t[1],4,-1530992060);s=hh(s,n,r,i,t[4],11,1272893353);i=hh(i,s,n,r,t[7],16,-155497632);r=hh(r,i,s,n,t[10],23,-1094730640);n=hh(n,r,i,s,t[13],4,681279174);s=hh(s,n,r,i,t[0],11,-358537222);i=hh(i,s,n,r,t[3],16,-722521979);r=hh(r,i,s,n,t[6],23,76029189);n=hh(n,r,i,s,t[9],4,-640364487);s=hh(s,n,r,i,t[12],11,-421815835);i=hh(i,s,n,r,t[15],16,530742520);r=hh(r,i,s,n,t[2],23,-995338651);n=ii(n,r,i,s,t[0],6,-198630844);s=ii(s,n,r,i,t[7],10,1126891415);i=ii(i,s,n,r,t[14],15,-1416354905);r=ii(r,i,s,n,t[5],21,-57434055);n=ii(n,r,i,s,t[12],6,1700485571);s=ii(s,n,r,i,t[3],10,-1894986606);i=ii(i,s,n,r,t[10],15,-1051523);r=ii(r,i,s,n,t[1],21,-2054922799);n=ii(n,r,i,s,t[8],6,1873313359);s=ii(s,n,r,i,t[15],10,-30611744);i=ii(i,s,n,r,t[6],15,-1560198380);r=ii(r,i,s,n,t[13],21,1309151649);n=ii(n,r,i,s,t[4],6,-145523070);s=ii(s,n,r,i,t[11],10,-1120210379);i=ii(i,s,n,r,t[2],15,718787259);r=ii(r,i,s,n,t[9],21,-343485551);e[0]=add32(n,e[0]);e[1]=add32(r,e[1]);e[2]=add32(i,e[2]);e[3]=add32(s,e[3])}function cmn(e,t,n,r,i,s){t=add32(add32(t,e),add32(r,s));return add32(t<<i|t>>>32-i,n)}function ff(e,t,n,r,i,s,o){return cmn(t&n|~t&r,e,t,i,s,o)}function gg(e,t,n,r,i,s,o){return cmn(t&r|n&~r,e,t,i,s,o)}function hh(e,t,n,r,i,s,o){return cmn(t^n^r,e,t,i,s,o)}function ii(e,t,n,r,i,s,o){return cmn(n^(t|~r),e,t,i,s,o)}function md51(e){txt="";var t=e.length,n=[1732584193,-271733879,-1732584194,271733878],r;for(r=64;r<=e.length;r+=64){md5cycle(n,md5blk(e.substring(r-64,r)))}e=e.substring(r-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<e.length;r++)i[r>>2]|=e.charCodeAt(r)<<(r%4<<3);i[r>>2]|=128<<(r%4<<3);if(r>55){md5cycle(n,i);for(r=0;r<16;r++)i[r]=0}i[14]=t*8;md5cycle(n,i);return n}function md5blk(e){var t=[],n;for(n=0;n<64;n+=4){t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24)}return t}function rhex(e){var t="",n=0;for(;n<4;n++)t+=hex_chr[e>>n*8+4&15]+hex_chr[e>>n*8&15];return t}function hex(e){for(var t=0;t<e.length;t++)e[t]=rhex(e[t]);return e.join("")}function md5(e){return hex(md51(e))}function add32(e,t){return e+t&4294967295}function BaseN(e){var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`~@#$%^&*()+|;/";var n;var r;var i;if(e){this._hash=e}else{this._hash=t}this._base=this._hash.length;this._reverseHash={};var s;while(s<this._hash.length){this._reverseHash[this._hash.charAt(s)]=s;s++}this.encodeUint=function(e,t){t=t===undefined?1:t;var n="";var r=e;while(r!=0){n=this._hash.charAt(r%this._base)+n;r=Math.floor(r/this._base)}while(n.length<t){n=this._hash.charAt(0)+n}return n};this.decodeUint=function(e){var t;var n;while(n<e.length){t=t*this._base;t=t+this._reverseHash[e.charAt(n)];n++}return t}}var hex_chr="0123456789abcdef".split("");if(md5("hello")!="5d41402abc4b2a76b9719d911017c592"){function add32(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}}(function(e){if(typeof bootstrap==="function"){bootstrap("promise",e)}else if(typeof exports==="object"){module.exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else if(typeof ses!=="undefined"){if(!ses.ok()){return}else{ses.makeQ=e}}else{Q=e()}})(function(){"use strict";function u(e){return function(){return o.apply(e,arguments)}}function m(e){return e===Object(e)}function g(e){return v(e)==="[object StopIteration]"||e instanceof y}function E(t,n){if(e&&n.stack&&typeof t==="object"&&t!==null&&t.stack&&t.stack.indexOf(w)===-1){var r=[];for(var i=n;!!i;i=i.source){if(i.stack){r.unshift(i.stack)}}r.unshift(t.stack);var s=r.join("\n"+w+"\n");t.stack=S(s)}}function S(e){var t=e.split("\n");var n=[];for(var r=0;r<t.length;++r){var i=t[r];if(!N(i)&&!x(i)&&i){n.push(i)}}return n.join("\n")}function x(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function T(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t){return[t[1],Number(t[2])]}var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n){return[n[1],Number(n[2])]}var r=/.*@(.+):(\d+)$/.exec(e);if(r){return[r[1],Number(r[2])]}}function N(e){var t=T(e);if(!t){return false}var i=t[0];var s=t[1];return i===r&&s>=n&&s<=lt}function C(){if(!e){return}try{throw new Error}catch(t){var n=t.stack.split("\n");var i=n[0].indexOf("@")>0?n[1]:n[2];var s=T(i);if(!s){return}r=s[0];return s[1]}}function k(e,t,n){return function(){if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack)}return e.apply(e,arguments)}}function L(e){if(H(e)){return e}if(B(e)){return G(e)}else{return Q(e)}}function A(){function l(e){r=e;o.source=e;f(t,function(t,n){s(function(){e.promiseDispatch.apply(e,n)})},void 0);t=void 0;n=void 0}var t=[],n=[],r;var i=h(A.prototype);var o=h(_.prototype);o.promiseDispatch=function(e,i,o){var u=a(arguments);if(t){t.push(u);if(i==="when"&&o[1]){n.push(o[1])}}else{s(function(){r.promiseDispatch.apply(r,u)})}};o.valueOf=k(function(){if(t){return o}var e=P(r);if(H(e)){r=e}return e},"valueOf","inspect");o.inspect=function(){if(!r){return{state:"pending"}}return r.inspect()};if(L.longStackSupport&&e){try{throw new Error}catch(u){o.stack=u.stack.substring(u.stack.indexOf("\n")+1)}}i.promise=o;i.resolve=function(e){if(r){return}l(L(e))};i.fulfill=function(e){if(r){return}l(Q(e))};i.reject=function(e){if(r){return}l(K(e))};i.notify=function(e){if(r){return}f(n,function(t,n){s(function(){n(e)})},void 0)};return i}function O(e){if(typeof e!=="function"){throw new TypeError("resolver must be a function.")}var t=A();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function M(e){return O(function(t,n){for(var r=0,i=e.length;r<i;r++){L(e[r]).then(t,n)}})}function _(e,t,n){if(t===void 0){t=function(e){return K(new Error("Promise does not support operation: "+e))}}if(n===void 0){n=function(){return{state:"unknown"}}}var r=h(_.prototype);r.promiseDispatch=function(n,i,s){var o;try{if(e[i]){o=e[i].apply(r,s)}else{o=t.call(r,i,s)}}catch(u){o=K(u)}if(n){n(o)}};r.inspect=n;if(n){var i=n();if(i.state==="rejected"){r.exception=i.reason}r.valueOf=k(function(){var e=n();if(e.state==="pending"||e.state==="rejected"){return r}return e.value})}return r}function D(e,t,n,r){return L(e).then(t,n,r)}function P(e){if(H(e)){var t=e.inspect();if(t.state==="fulfilled"){return t.value}}return e}function H(e){return m(e)&&typeof e.promiseDispatch==="function"&&typeof e.inspect==="function"}function B(e){return m(e)&&typeof e.then==="function"}function j(e){return H(e)&&e.inspect().state==="pending"}function F(e){return!H(e)||e.inspect().state==="fulfilled"}function I(e){return H(e)&&e.inspect().state==="rejected"}function W(){if(!U&&typeof window!=="undefined"&&!window.Touch&&window.console){console.warn("[Q] Unhandled rejection reasons (should be empty):",q)}U=true}function X(){for(var e=0;e<q.length;e++){var t=q[e];console.warn("Unhandled rejection reason:",t)}}function V(){q.length=0;R.length=0;U=false;if(!z){z=true;if(typeof process!=="undefined"&&process.on){process.on("exit",X)}}}function $(e,t){if(!z){return}R.push(e);if(t&&typeof t.stack!=="undefined"){q.push(t.stack)}else{q.push("(no stack) "+t)}W()}function J(e){if(!z){return}var t=l(R,e);if(t!==-1){R.splice(t,1);q.splice(t,1)}}function K(e){var t=_({when:function(t){if(t){J(this)}return t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});$(t,e);return t}function Q(e){return _({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){if(t===null||t===void 0){return e.apply(void 0,n)}else{return e[t].apply(e,n)}},apply:function(t,n){return e.apply(t,n)},keys:function(){return d(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function G(e){var t=A();s(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}});return t.promise}function Y(e){return _({isDef:function(){}},function(n,r){return it(e,n,r)},function(){return L(e).inspect()})}function Z(e,t,n){return L(e).spread(t,n)}function et(e){return function(){function t(e,t){var s;if(b){try{s=n[e](t)}catch(o){return K(o)}if(s.done){return s.value}else{return D(s.value,r,i)}}else{try{s=n[e](t)}catch(o){if(g(o)){return o.value}else{return K(o)}}return D(s,r,i)}}var n=e.apply(this,arguments);var r=t.bind(t,"next");var i=t.bind(t,"throw");return r()}}function tt(e){L.done(L.async(e)())}function nt(e){throw new y(e)}function rt(e){return function(){return Z([this,st(arguments)],function(t,n){return e.apply(t,n)})}}function it(e,t,n){return L(e).dispatch(t,n)}function st(e){return D(e,function(e){var t=0;var n=A();f(e,function(r,i,s){var o;if(H(i)&&(o=i.inspect()).state==="fulfilled"){e[s]=o.value}else{++t;D(i,function(r){e[s]=r;if(--t===0){n.resolve(e)}},n.reject,function(e){n.notify({index:s,value:e})})}},void 0);if(t===0){n.resolve(e)}return n.promise})}function ot(e){return D(e,function(e){e=c(e,L);return D(st(c(e,function(e){return D(e,i,i)})),function(){return e})})}function ut(e){return L(e).allSettled()}function at(e,t){return L(e).then(void 0,void 0,t)}function ft(e,t){return L(e).nodeify(t)}var e=false;try{throw new Error}catch(t){e=!!t.stack}var n=C();var r;var i=function(){};var s=function(){function o(){while(e.next){e=e.next;var t=e.task;e.task=void 0;var r=e.domain;if(r){e.domain=void 0;r.enter()}try{t()}catch(s){if(i){if(r){r.exit()}setTimeout(o,0);if(r){r.enter()}throw s}else{setTimeout(function(){throw s},0)}}if(r){r.exit()}}n=false}var e={task:void 0,next:null};var t=e;var n=false;var r=void 0;var i=false;s=function(e){t=t.next={task:e,domain:i&&process.domain,next:null};if(!n){n=true;r()}};if(typeof process!=="undefined"&&process.nextTick){i=true;r=function(){process.nextTick(o)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){r=setImmediate.bind(window,o)}else{r=function(){setImmediate(o)}}}else if(typeof MessageChannel!=="undefined"){var u=new MessageChannel;u.port1.onmessage=function(){r=a;u.port1.onmessage=o;o()};var a=function(){u.port2.postMessage(0)};r=function(){setTimeout(o,0);a()}}else{r=function(){setTimeout(o,0)}}return s}();var o=Function.call;var a=u(Array.prototype.slice);var f=u(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1){do{if(n in this){t=this[n++];break}if(++n>=r){throw new TypeError}}while(1)}for(;n<r;n++){if(n in this){t=e(t,this[n],n)}}return t});var l=u(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++){if(this[t]===e){return t}}return-1});var c=u(Array.prototype.map||function(e,t){var n=this;var r=[];f(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0);return r});var h=Object.create||function(e){function t(){}t.prototype=e;return new t};var p=u(Object.prototype.hasOwnProperty);var d=Object.keys||function(e){var t=[];for(var n in e){if(p(e,n)){t.push(n)}}return t};var v=u(Object.prototype.toString);var y;if(typeof ReturnValue!=="undefined"){y=ReturnValue}else{y=function(e){this.value=e}}var b;try{new Function("(function* (){ yield 1; })");b=true}catch(t){b=false}var w="From previous event:";L.resolve=L;L.nextTick=s;L.longStackSupport=false;L.defer=A;A.prototype.makeNodeResolver=function(){var e=this;return function(t,n){if(t){e.reject(t)}else if(arguments.length>2){e.resolve(a(arguments,1))}else{e.resolve(n)}}};L.promise=O;L.passByCopy=function(e){return e};_.prototype.passByCopy=function(){return this};L.join=function(e,t){return L(e).join(t)};_.prototype.join=function(e){return L([this,e]).spread(function(e,t){if(e===t){return e}else{throw new Error("Can't join: not the same: "+e+" "+t)}})};L.race=M;_.prototype.race=function(){return this.then(L.race)};L.makePromise=_;_.prototype.toString=function(){return"[object Promise]"};_.prototype.then=function(e,t,n){function u(t){try{return typeof e==="function"?e(t):t}catch(n){return K(n)}}function a(e){if(typeof t==="function"){E(e,r);try{return t(e)}catch(n){return K(n)}}return K(e)}function f(e){return typeof n==="function"?n(e):e}var r=this;var i=A();var o=false;s(function(){r.promiseDispatch(function(e){if(o){return}o=true;i.resolve(u(e))},"when",[function(e){if(o){return}o=true;i.resolve(a(e))}])});r.promiseDispatch(void 0,"when",[void 0,function(e){var t;var n=false;try{t=f(e)}catch(r){n=true;if(L.onerror){L.onerror(r)}else{throw r}}if(!n){i.notify(t)}}]);return i.promise};L.when=D;_.prototype.thenResolve=function(e){return this.then(function(){return e})};L.thenResolve=function(e,t){return L(e).thenResolve(t)};_.prototype.thenReject=function(e){return this.then(function(){throw e})};L.thenReject=function(e,t){return L(e).thenReject(t)};L.nearer=P;L.isPromise=H;L.isPromiseAlike=B;L.isPending=j;_.prototype.isPending=function(){return this.inspect().state==="pending"};L.isFulfilled=F;_.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"};L.isRejected=I;_.prototype.isRejected=function(){return this.inspect().state==="rejected"};var q=[];var R=[];var U=false;var z=true;L.resetUnhandledRejections=V;L.getUnhandledReasons=function(){return q.slice()};L.stopUnhandledRejectionTracking=function(){V();if(typeof process!=="undefined"&&process.on){process.removeListener("exit",X)}z=false};V();L.reject=K;L.fulfill=Q;L.master=Y;L.spread=Z;_.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)};L.async=et;L.spawn=tt;L["return"]=nt;L.promised=rt;L.dispatch=it;_.prototype.dispatch=function(e,t){var n=this;var r=A();s(function(){n.promiseDispatch(r.resolve,e,t)});return r.promise};L.get=function(e,t){return L(e).dispatch("get",[t])};_.prototype.get=function(e){return this.dispatch("get",[e])};L.set=function(e,t,n){return L(e).dispatch("set",[t,n])};_.prototype.set=function(e,t){return this.dispatch("set",[e,t])};L.del=L["delete"]=function(e,t){return L(e).dispatch("delete",[t])};_.prototype.del=_.prototype["delete"]=function(e){return this.dispatch("delete",[e])};L.mapply=L.post=function(e,t,n){return L(e).dispatch("post",[t,n])};_.prototype.mapply=_.prototype.post=function(e,t){return this.dispatch("post",[e,t])};L.send=L.mcall=L.invoke=function(e,t){return L(e).dispatch("post",[t,a(arguments,2)])};_.prototype.send=_.prototype.mcall=_.prototype.invoke=function(e){return this.dispatch("post",[e,a(arguments,1)])};L.fapply=function(e,t){return L(e).dispatch("apply",[void 0,t])};_.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])};L["try"]=L.fcall=function(e){return L(e).dispatch("apply",[void 0,a(arguments,1)])};_.prototype.fcall=function(){return this.dispatch("apply",[void 0,a(arguments)])};L.fbind=function(e){var t=L(e);var n=a(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(a(arguments))])}};_.prototype.fbind=function(){var e=this;var t=a(arguments);return function(){return e.dispatch("apply",[this,t.concat(a(arguments))])}};L.keys=function(e){return L(e).dispatch("keys",[])};_.prototype.keys=function(){return this.dispatch("keys",[])};L.all=st;_.prototype.all=function(){return st(this)};L.allResolved=k(ot,"allResolved","allSettled");_.prototype.allResolved=function(){return ot(this)};L.allSettled=ut;_.prototype.allSettled=function(){return this.then(function(e){return st(c(e,function(e){function t(){return e.inspect()}e=L(e);return e.then(t,t)}))})};L.fail=L["catch"]=function(e,t){return L(e).then(void 0,t)};_.prototype.fail=_.prototype["catch"]=function(e){return this.then(void 0,e)};L.progress=at;_.prototype.progress=function(e){return this.then(void 0,void 0,e)};L.fin=L["finally"]=function(e,t){return L(e)["finally"](t)};_.prototype.fin=_.prototype["finally"]=function(e){e=L(e);return this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})};L.done=function(e,t,n,r){return L(e).done(t,n,r)};_.prototype.done=function(e,t,n){var r=function(e){s(function(){E(e,i);if(L.onerror){L.onerror(e)}else{throw e}})};var i=e||t||n?this.then(e,t,n):this;if(typeof process==="object"&&process&&process.domain){r=process.domain.bind(r)}i.then(void 0,r)};L.timeout=function(e,t,n){return L(e).timeout(t,n)};_.prototype.timeout=function(e,t){var n=A();var r=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);this.then(function(e){clearTimeout(r);n.resolve(e)},function(e){clearTimeout(r);n.reject(e)},n.notify);return n.promise};L.delay=function(e,t){if(t===void 0){t=e;e=void 0}return L(e).delay(t)};_.prototype.delay=function(e){return this.then(function(t){var n=A();setTimeout(function(){n.resolve(t)},e);return n.promise})};L.nfapply=function(e,t){return L(e).nfapply(t)};_.prototype.nfapply=function(e){var t=A();var n=a(e);n.push(t.makeNodeResolver());this.fapply(n).fail(t.reject);return t.promise};L.nfcall=function(e){var t=a(arguments,1);return L(e).nfapply(t)};_.prototype.nfcall=function(){var e=a(arguments);var t=A();e.push(t.makeNodeResolver());this.fapply(e).fail(t.reject);return t.promise};L.nfbind=L.denodeify=function(e){var t=a(arguments,1);return function(){var n=t.concat(a(arguments));var r=A();n.push(r.makeNodeResolver());L(e).fapply(n).fail(r.reject);return r.promise}};_.prototype.nfbind=_.prototype.denodeify=function(){var e=a(arguments);e.unshift(this);return L.denodeify.apply(void 0,e)};L.nbind=function(e,t){var n=a(arguments,2);return function(){function s(){return e.apply(t,arguments)}var r=n.concat(a(arguments));var i=A();r.push(i.makeNodeResolver());L(s).fapply(r).fail(i.reject);return i.promise}};_.prototype.nbind=function(){var e=a(arguments,0);e.unshift(this);return L.nbind.apply(void 0,e)};L.nmapply=L.npost=function(e,t,n){return L(e).npost(t,n)};_.prototype.nmapply=_.prototype.npost=function(e,t){var n=a(t||[]);var r=A();n.push(r.makeNodeResolver());this.dispatch("post",[e,n]).fail(r.reject);return r.promise};L.nsend=L.nmcall=L.ninvoke=function(e,t){var n=a(arguments,2);var r=A();n.push(r.makeNodeResolver());L(e).dispatch("post",[t,n]).fail(r.reject);return r.promise};_.prototype.nsend=_.prototype.nmcall=_.prototype.ninvoke=function(e){var t=a(arguments,1);var n=A();t.push(n.makeNodeResolver());this.dispatch("post",[e,t]).fail(n.reject);return n.promise};L.nodeify=ft;_.prototype.nodeify=function(e){if(e){this.then(function(t){s(function(){e(null,t)})},function(t){s(function(){e(t)})})}else{return this}};var lt=C();return L});(function(e){function u(e){var t=Q.defer();var n=a();var r=f(e);n.open("POST",o);n.setRequestHeader("Content-type","application/x-www-form-urlencoded");n.onreadystatechange=function(){if(n.readyState===4&&n.status===200){t.resolve(n.responseText)}};n.send(r);return t.promise}function a(){var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];var t;for(var n=0;n<e.length;n++){try{t=e[n]()}catch(r){continue}break}return t}function f(e){var t="";if(typeof e==="string"){t=e}else{var n=encodeURIComponent;for(var r in e){if(e.hasOwnProperty(r)){t+="&"+n(r)+"="+n(e[r])}}}return t}function h(e){var t=e.length%6;var n="";var r=0;while(r<e.length){var i=parseInt("0x"+e.substr(r,6));n=n+c.encodeUint(i,4);r=r+6}return t+""+n}function p(e,n){var r={};r.tracker_id=t.settings.apiId;var i="";for(var s=0;s<16;s++){i=i+l.charAt(Math.random()*l.length)}r.command_id="securePacket";n=n||{};n.command_id=e;n.as_version=3;n.session_id=t.settings.sessionId;n.publisher_id=t.settings.publisherId;n.seed=i;var o=md5(i);var a=JSON.stringify(n);var f=t.settings.encryptionKey;var c=RC4.encrypt(a,f);var p=h(o+c);r.secure=p;return u(r).then(function(e,t){var e=JSON.parse(e);console.log(e);return e})}var t={};e.NG=t;t.connect=function(e,r,s){var o;if(typeof arguments[0]==="object"){o=arguments[0]}else{o={apiId:e,encryptionKey:r,movieVersion:s}}o.movieVersion=o.movieVersion||"";t.settings=o;t.settings.publisherId=1;var a={};window.location.search.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,n,r){a[t]=r});n(a);console.log("== Connecting to Newgrounds... ==");return u({tracker_id:t.settings.apiId,command_id:"preloadSettings"}).then(function(e){t.connection=JSON.parse(e);t.medals=t.connection.medals||[];i();console.log(t.connection);console.log("== Connection Complete! ==");return t.connection})};var n=function(e){t.settings.sessionId=e.NewgroundsAPI_SessionID;t.settings.username=e.NewgroundsAPI_UserName;t.settings.userId=e.NewgroundsAPI_UserID};t.login=function(){var e=Q.defer();var t=window.open("https://www.newgrounds.com/login/remote/");window.addEventListener("message",function(r){var i=r.data.response;i=JSON.parse(decodeURIComponent(i));n(i);t.close();e.resolve(i)},false);return e.promise};t.getMedal=function(e){return t.medals.filter(function(t){return t.medal_name==e})[0]};t.unlockMedal=function(e){var n=t.getMedal(e);if(!n)return;n.medal_unlocked=true;s(e);return p("unlockMedal",{medal_id:n.medal_id})};var r=document.createElement("div");var i=function(){document.body.appendChild(r);r.innerHTML=""+"<div id='medal_container' style='position:fixed; background:#333; border-bottom:5px solid #222; width:300px; height:80px; top:10px; left:-310px; overflow:hidden; -webkit-transition:left 0.5s ease-in-out; -moz-transition:left 0.5s ease-in-out; -ms-transition:left 0.5s ease-in-out; -o-transition:left 0.5s ease-in-out; transition:left 0.5s ease-in-out;'>"+"	<div style='width:300px; letter-spacing: 6.5px;height: 25px; color:#fd0; text-align:center; background:#000; font-size:20px;font-family: sans-serif;padding-top: 5px;'>MEDAL UNLOCKED</div>"+"	<div id='medal_icon' style='float:left; width:50px; height:50px; background:#000'></div>"+"	<div id='medal_description' style='float:left; color:#fff; font-weight:100; margin-left:10px; width:235px; height:45px; padding-top:7px; font-family:sans-serif; font-size:15px'></div>"+"</div>";for(var e=0;e<t.medals.length;e++){var n=t.medals[e].medal_icon;var i=new Image;i.src=n}};var s=function(e){var n=t.getMedal(e);var r=document.getElementById("medal_container");r.style.left="10px";setTimeout(function(){r.style.left="-310px"},5e3);var i=document.getElementById("medal_icon");i.style.backgroundImage="url("+n.medal_icon+")";var s=document.getElementById("medal_description");s.innerHTML=n.medal_description};var o="http://ncase-proxy.herokuapp.com/www.ngads.com/gateway_v2.php";var l="/g8236klvBQ#&|;Zb*7CEA59%s`Oue1wziFp$rDVY@TKxUPWytSaGHJ>dmoMR^<0~4qNLhc(I+fjn)X";var c=new BaseN(l)})(window)